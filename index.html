<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parasha Riddle</title>
</head>
<body>
    <script>
        async function fetchAndProcess() {
            const lengths = [3, 3, 3];
            console.log("מתחיל");

            // const path = "https://beneyisrael.com/Tikun-Qorim/cp/cp0309.htm";
            const path = "emor.txt"; 
            // const corsProxy = "https://cors-anywhere.herokuapp.com/";

            try {
                const response = await fetch(path);
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const textContents = doc.body.textContent || "";

                const words1 = textContents.split(/[^א-ת]/);
                const words = words1.filter(word => word.length > 0);

                console.log(words.length);

                for (let i = 0; i < words.length - lengths.length; i++) {
                    let match = true;
                    for (let j = 0; j < lengths.length; j++) {
                        if (words[i + j] == null || words[i + j].length !== lengths[j]) {
                            match = false;
                            break;
                        }
                    }
                    if (match) {
                        const matchedWords = words.slice(i, i + lengths.length).join(' ');
                        console.log(matchedWords);
                    }
                }
            } catch (error) {
                console.error("Error fetching or processing data:", error);
            }
        }

        fetchAndProcess();
    </script>
</div id="mydiv">
    
</body>
</html>
